{
    "id": "ch.x29a.playitslowly",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.38",
    "sdk": "org.gnome.Sdk",
    "command": "playitslowly",
    "finish-args": [
        "--share=ipc",
        "--socket=pulseaudio",
        "--socket=x11",
        "--filesystem=home:ro"
    ],
    "modules": [
        {
            "name": "soundtouch",
            "config-opts": [
                "--enable-shared", "--disable-static"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.com/soundtouch/soundtouch.git",
                    "tag": "2.1.2",
                    "commit": "9205fc971ed23cff407a67242bb9036a51113af4"
                }
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/lib/pkgconfig",
                "/share/aclocal",
                "/share/doc"
            ]
        },
        {
            "name": "gstreamer",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gstreamer.freedesktop.org/src/gstreamer/gstreamer-1.18.0.tar.xz",
                    "sha256": "0ff09245b06c0aeb5d9a156edcab088a7e8213a0bf9c84a1ff0318f9c00c7805"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/*.la",
                "/lib/gstreamer-1.0/*.la",
                "/lib/gstreamer-1.0/include",
                "/lib/pkgconfig",
                "/share/gtk-doc"
            ]
        },
        {
            "name": "gst-plugins-base",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gstreamer.freedesktop.org/src/gst-plugins-base/gst-plugins-base-1.18.0.tar.xz",
                    "sha256": "762abdd1a950809a1cea62fff7f86b5f7d6bd5f6841e3e585c700b823cdb7897"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/*.la",
                "/lib/gstreamer-1.0/*.la",
                "/lib/gstreamer-1.0/include",
                "/lib/pkgconfig",
                "/share/gtk-doc"
            ]
        },
        {
            "name": "gstreamer-plugins-bad",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-1.18.0.tar.xz",
                    "sha256": "f382ab1caddd64aaa7acb7c4787487f63fd39bd0fde9c757655cbaa457c1185f"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/*.la",
                "/lib/gstreamer-1.0/*.la",
                "/lib/gstreamer-1.0/include",
                "/lib/pkgconfig",
                "/share/gtk-doc"
            ]
        },
        {
            "name": "playitslowly",
            "buildsystem": "simple",
            "build-commands": [
                "python3 setup.py install --prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://29a.ch/playitslowly/playitslowly-1.5.1.tar.gz",
                    "sha256": "7dfe3da5417971183a13002d1e4ba4f30770baaf1ae3f9ef0ac66a6727f476aa"
                },
                /* Those are merged upstream */
                {
                    "type": "patch",
                    "path": "0001-Install-the-icons-in-the-right-folders.patch"
                },
                {
                    "type": "patch",
                    "path": "0002-Move-the-128x128-icon.patch"
                },
                {
                    "type": "patch",
                    "path": "0003-Add-an-appdata-file.patch"
                },
                {
                    "type": "patch",
                    "path": "0004-Rename-the-desktop-appdata-and-icon-files.patch"
                },
                {
                    "type": "patch",
                    "path": "0005-appdata-Add-OARS-info.patch"
                },
                {
                    "type": "patch",
                    "path": "0006-appdata-Follow-the-new-recommendation-for-app-ids.patch"
                },
                {
                    "type": "patch",
                    "path": "0007-appdata-Add-a-reference-to-the-old-app-id.patch"
                },
                {
                    "type": "patch",
                    "path": "0008-appdata-Add-release-descriptions.patch"
                }
            ]
        }
    ]
}
